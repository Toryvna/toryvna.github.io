!function(a,b){"undefined"!=typeof module&&module.exports?module.exports=b():a.ImageZoom=b()}(this,function(){return function(a,b){"use strict";function c(a){if(a){var b=a.getBoundingClientRect();return{left:b.left,top:b.top}}return{left:0,top:0}}function d(a){return n.width-a}function e(a){return n.height-a}function f(a,b,c){return b>a?b:a>c?c:a}function g(a,b,c){var d=f(a,b,c);return d-b}function h(a){var b=o.zoomLens.width/2;return g(a,b,d(b))}function i(a){var b=o.zoomLens.height/2;return g(a,b,e(b))}function j(a,b){a.scale?(b.zoomedImg.element.style.width=a.width*a.scale+"px",b.zoomedImg.element.style.height=a.height*a.scale+"px"):(b.zoomedImg.element.style.width=a.zoomWidth+"px",b.zoomedImg.element.style.height=b.sourceImg.element.style.height)}function k(){n.height=n.height||o.sourceImg.element.height,o.sourceImg.element.style.height=n.height+"px",j(n,o),o.sourceImg.naturalWidth=o.sourceImg.element.naturalWidth,o.sourceImg.naturalHeight=o.sourceImg.element.naturalHeight,o.zoomedImg.element.style.backgroundSize=o.sourceImg.naturalWidth+"px "+o.sourceImg.naturalHeight+"px",n.zoomStyle&&(o.zoomedImg.element.style.cssText+=n.zoomStyle),r=o.sourceImg.naturalWidth/n.width,s=o.sourceImg.naturalHeight/n.height,t=c(o.sourceImg.element),n.scale?(o.zoomLens.width=n.width/(o.sourceImg.naturalWidth/(n.width*n.scale)),o.zoomLens.height=n.height/(o.sourceImg.naturalHeight/(n.height*n.scale))):(o.zoomLens.width=n.zoomWidth/r,o.zoomLens.height=n.height/s),o.zoomLens.element.style.width=o.zoomLens.width+"px",o.zoomLens.element.style.height=o.zoomLens.height+"px",o.zoomLens.element.style.position="absolute",o.zoomLens.element.pointerEvents="none"}function l(){if(n.img){var b=document.createElement("img");b.src=n.img,o.sourceImg.element=a.appendChild(b)}else o.sourceImg.element=a.children[0];return o.sourceImg.element.onload=k,n=n||{},a.style.position="relative",o.sourceImg.element.style.width=n.width+"px"||"auto",o.sourceImg.element.style.height=n.height?n.height+"px":"auto",o.zoomLens.element=a.appendChild(q),o.zoomLens.element.style.display="none",o.zoomedImg.element=a.appendChild(p),o.zoomedImg.element.style.position="absolute",o.zoomedImg.element.style.top=o.zoomedImgOffset.vertical+"px",o.zoomedImg.element.style.left=n.width+o.zoomedImgOffset.horizontal+"px",o.zoomedImg.element.style.backgroundImage="url("+o.sourceImg.element.src+")",o.zoomedImg.element.style.backgroundRepeat="no-repeat",o.zoomedImg.element.style.display="none",a.addEventListener("mousemove",u,!1),a.addEventListener("mouseenter",u,!1),a.addEventListener("mouseleave",u,!1),o.zoomLens.element.addEventListener("mouseenter",u,!1),o.zoomLens.element.addEventListener("mouseleave",u,!1),window.addEventListener("scroll",u,!1),o}function m(){return a.removeEventListener("mousemove",u,!1),a.removeEventListener("mouseenter",u,!1),a.removeEventListener("mouseleave",u,!1),o.zoomLens.element.removeEventListener("mouseenter",u,!1),o.zoomLens.element.removeEventListener("mouseleave",u,!1),window.removeEventListener("scroll",u,!1),o.zoomLens&&o.zoomedImg&&(a.removeChild(o.zoomLens.element),a.removeChild(o.zoomedImg.element)),n.img&&a.removeChild(o.sourceImg.element),o}var n=JSON.parse(JSON.stringify(b));if(a){var o={sourceImg:{element:null,width:0,height:0,naturalWidth:0,naturalHeight:0},zoomedImgOffset:{vertical:0,horizontal:0},zoomedImg:{element:null,width:0,height:0},zoomLens:{element:null,width:0,height:0}},p=document.createElement("div"),q=document.createElement("div");p.classList.add("resultZoom"),q.classList.add("mouseZoom");var r,s,t;o.zoomedImgOffset=n.offset||{vertical:0,horizontal:0};var u={handleEvent:function(a){switch(a.type){case"mousemove":return this.handleMouseMove(a);case"mouseenter":return this.handleMouseEnter(a);case"mouseleave":return this.handleMouseLeave(a);case"scroll":return this.handleScroll(a)}},handleMouseMove:function(a){var b,c,d,e,f;t&&(b=h(a.clientX-t.left),c=i(a.clientY-t.top),d=b*r,e=c*s,f="-"+d+"px -"+e+"px",o.zoomedImg.element.style.backgroundPosition=f,o.zoomLens.element.style.cssText+="top:"+c+"px;left:"+b+"px;display: block;")},handleMouseEnter:function(){o.zoomedImg.element.style.display="block",o.zoomLens.element.style.display="block"},handleMouseLeave:function(){o.zoomedImg.element.style.display="none",o.zoomLens.element.style.display="none"},handleScroll:function(){t=c(o.sourceImg.element)}};return l(),{setup:function(){l()},kill:function(){m()},_getInstanceInfo:function(){return{setup:l,kill:m,onSourceImgLoad:k,data:o,options:n}}}}}});