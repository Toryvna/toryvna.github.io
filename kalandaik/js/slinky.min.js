"use strict";function _objectSpread(a){for(var b=1;b<arguments.length;b++){var c=null!=arguments[b]?arguments[b]:{},d=Object.keys(c);"function"==typeof Object.getOwnPropertySymbols&&(d=d.concat(Object.getOwnPropertySymbols(c).filter(function(a){return Object.getOwnPropertyDescriptor(c,a).enumerable}))),d.forEach(function(b){_defineProperty(a,b,c[b])})}return a}function _defineProperty(a,b,c){return b in a?Object.defineProperty(a,b,{value:c,enumerable:!0,configurable:!0,writable:!0}):a[b]=c,a}function _classCallCheck(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function _defineProperties(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}function _createClass(a,b,c){return b&&_defineProperties(a.prototype,b),c&&_defineProperties(a,c),a}var Slinky=function(){function a(b){var c=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};_classCallCheck(this,a),this.settings=_objectSpread({},this.options,c),this._init(b)}return _createClass(a,[{key:"options",get:function(){return{resize:!0,speed:300,theme:"slinky-theme-default",title:!1}}}]),_createClass(a,[{key:"_init",value:function(a){this.menu=jQuery(a),this.base=this.menu.children().first(),this.base;var b=this.menu,c=this.settings;b.addClass("slinky-menu").addClass(c.theme),this._transition(c.speed),jQuery("a + ul",b).prev().addClass("next"),jQuery("li > a",b).wrapInner("<span>");var d=jQuery("<li>").addClass("header");jQuery("li > ul",b).prepend(d);var e=jQuery("<a>").prop("href","#").addClass("back");jQuery(".header",b).prepend(e),c.title&&jQuery("li > ul",b).each(function(a,b){var c=jQuery(b).parent().find("a").first().text();if(c){var d=jQuery("<header>").addClass("title").text(c);jQuery("> .header",b).append(d)}}),this._addListeners(),this._jumpToInitial()}},{key:"_addListeners",value:function(){var a=this,b=this.menu,c=this.settings;jQuery("a",b).on("click",function(d){if(a._clicked+c.speed>Date.now())return!1;a._clicked=Date.now();var e=jQuery(d.currentTarget);(0===e.attr("href").indexOf("#")||e.hasClass("next")||e.hasClass("back"))&&d.preventDefault(),e.hasClass("next")?(b.find(".active").removeClass("active"),e.next().show().addClass("active"),a._move(1),c.resize&&a._resize(e.next())):e.hasClass("back")&&(a._move(-1,function(){b.find(".active").removeClass("active"),e.parent().parent().hide().parentsUntil(b,"ul").first().addClass("active")}),c.resize&&a._resize(e.parent().parent().parentsUntil(b,"ul")))})}},{key:"_jumpToInitial",value:function(){var a=this.menu,b=this.settings,c=a.find(".active");0<c.length&&(c.removeClass("active"),this.jump(c,!1)),setTimeout(function(){return a.height(a.outerHeight())},b.speed)}},{key:"_move",value:function(){var a=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0,b=1<arguments.length&&void 0!==arguments[1]?arguments[1]:function(){};if(0!==a){var c=this.settings,d=this.base,e=Math.round(parseInt(d.get(0).style.left))||0;d.css("left","".concat(e-100*a,"%")),"function"==typeof b&&setTimeout(b,c.speed)}}},{key:"_resize",value:function(a){this.menu.height(a.outerHeight())}},{key:"_transition",value:function(){var a=0<arguments.length&&void 0!==arguments[0]?arguments[0]:300,b=this.menu,c=this.base;b.css("transition-duration","".concat(a,"ms")),c.css("transition-duration","".concat(a,"ms"))}},{key:"jump",value:function(a){var b=!(1<arguments.length&&void 0!==arguments[1])||arguments[1];if(a){var c=this.menu,d=this.settings,e=jQuery(a),f=c.find(".active"),g=0;0<f.length&&(g=f.parentsUntil(c,"ul").length),c.find("ul").removeClass("active").hide();var h=e.parentsUntil(c,"ul");h.show(),e.show().addClass("active"),b||this._transition(0),this._move(h.length-g),d.resize&&this._resize(e),b||this._transition(d.speed)}}},{key:"home",value:function(){var a=!(0<arguments.length&&void 0!==arguments[0])||arguments[0],b=this.base,c=this.menu,d=this.settings;a||this._transition(0);var e=c.find(".active"),f=e.parentsUntil(c,"ul");this._move(-f.length,function(){e.removeClass("active").hide(),f.not(b).hide()}),d.resize&&this._resize(b),!1===a&&this._transition(d.speed)}},{key:"destroy",value:function(){var a=this,b=this.base,c=this.menu;jQuery(".header",c).remove(),jQuery("a",c).removeClass("next").off("click"),c.css({height:"","transition-duration":""}),b.css({left:"","transition-duration":""}),jQuery("li > a > span",c).contents().unwrap(),c.find(".active").removeClass("active"),c.attr("class").split(" ").forEach(function(a){0===a.indexOf("slinky")&&c.removeClass(a)}),["settings","menu","base"].forEach(function(b){return delete a[b]})}}]),a}();jQuery.fn.slinky=function(a){return new Slinky(this,a)};